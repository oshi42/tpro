## Задание №1

## Знакомство с GitLab

Вы находитесь на сайте локально функционирующей системы управления проектами **GitLab**. Её доменное имя https://gitwork.ru, поэтому будем называть его gitlab или gitwork. Это альтернатива онлайн-ресурсу gitlab.com. Текущий GitLab развернут локально и не подключен к интернету, доступ к нему может быть получен только из компьютерных классов. Локальный GitLab используется для решения следующих задач:
1. Получения материалов к занятиям. [Здесь](//gitwork.ru/root/help/wikis/%D0%9F%D0%BE%D0%BB%D0%B5%D0%B7%D0%BD%D1%8B%D0%B5-%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B8) приведён перечень дисциплин, которые уже адаптированы для gitwork.
2. Работы с кодом. Проект в GitLab - это либо типовая работа слушателя по дисциплине, либо самостоятельная работа в виде курсового  или дипломного проектирования. Большинство проектов закрыты по ряду соображений, но есть и открытые проекты. Например, такой [диплом](//gitwork.ru/Renzdby/GraphicalNewsExtractor). При использовании gitwork слушатель не привязан к конкретной аудитории и может работать на любом компьютере сети. Кроме того, возможна организация командной разработки.
3. Хранение результатов выполнения заданий в электронном виде и доступ к ним преподавателей

Широко используемые сервисы для хранения кода онлайн это:
* GitHub
* Bitbucket
* GitLab

Фактически, GitHub сейчас стал социальной сетью для программистов, различные готовые решения и результаты своих разработок они выкладывают там для общего доступа. В июне 2018 года Microsoft купила GitHub  - это вынуждает искать альтернативы на тот случай, если github будет закрыт или изменится в негативном плане. 

Из представленных вариантов только у GitLab есть бесплатная версия для локальной установки без использования сети Интернет (так называемый self-hosted вариант). Это позволяет развернуть GitLab в любом подразделении, где есть локальная сеть. Принципы работы со всеми системами одинаковы.

GitLab - это многофункциональный продукт, который включает в себя
* систему управления проектами для системы контроля версий Git - вкладки repository и merge requests слева;
* вики-систему - вкладка wiki;
* систему отслеживания ошибок (bug-tracking system, известные примеры таких систем: Redmine, Bugzilla, Atlassian JIRA, YouTrack) - вкладка issues;
* систему непрерывной доставки кода (continious integration/continious delivery) - вкладка CI/CD.

GitLab реализован на языках программирования Ruby и Go.

### Первые шаги в GitLab
1. Центральной сущностью GitLab является понятие **проекта**. Проект создаётся пользователем или группой и включает в себя множество файлов (под контролем системы контроля версий git), систему отслеживания ошибок (вкладка issues), и вики-систему. Вверху, под меню, указана иерархия Subjects - tpro - Repository, то есть вы находитесь в репозитории проекта tpro группы "Subjects".

1. У каждого пользователя есть учётная запись (username при регистрации). Если username дописать в адресную строку после имени сервера, вы попадёте в профайл пользователя, например, [https://gitwork.ru/anetto/](//gitwork.ru/anetto/). Откройте эту ссылку в новой вкладке (Ctrl+click). Посередине страницы вы видите fullname пользователя, дату его регистрации, вкладку **Activity** - на ней цветными квадратиками отражена активность пользователя. Под активностью понимается число его действий по созданию, изменению или удалению текста в проектах. Во вкладке **Personal projects** вы можете увидеть созданные пользователем проекты. Для anetto это репозитории по нескольким предметам. Зная имя пользователя и название его проекта, легко набрать полный путь [http://gitwork.ru/anetto/wiki/](//gitwork.ru/anetto/wiki/). 

2. Для создания проектов, не принадлежих конкретному пользователю, можно создавать группу. Например, текущий проект tpro, создан в группе Subjects. Для того чтобы попасть в проект через адресную строку броузера, можно по аналогии с вышеописанными действиями для пользователя ввести адрес [https://gitwork.ru/sub/tpro/](//gitwork.ru/sub/tpro/). Обратите внимание что вместо **subjects** для имени группы указано **sub** - это краткое наименование группы для указания в адресе. Аналогично для того чтобы попасть на страницу самой группы необходимо ввести адрес [https://gitwork.ru/sub/](//gitwork.ru/sub/). На странице группы показаны все проекты, принадлежащие ей.

2. В адресной строке браузера сейчас вы видите **https://gitwork.ru/sub/tpro/-/blob/master/task1.md**, состоящую из:
  * gitwork.ru - доменное имя локального сайта системы управлени проектами
  * sub - краткое имя группы 
  * tpro - название проекта
  * blob - тип отображения записи (например, raw для отображения без форматирования, edit для редактирования, blob при просмотре и другие)
  * master - ветка, для которой отображается файл (термин "ветка" вы узнаете позже при более детальном знакомстве с git)
  * task1.md - название того файла, который вы читаете, в данном случае это файл с первым заданием на практическое занятие.

**Следующие действия производите в отдельной вкладке, не закрывая текущую**
1. Если вы еще не зарегистрированы, зарегистрируйте учётную запись, для этого перейдите по ссылке  [https://gitwork.ru/](//gitwork.ru/). Внимательно отнеситесь к правильности full name и остальных полей. Full name служит для удобства других пользователей, которые видят вашу учётную запись. Username используется для входа в систему, и участвует в формировании адреса проекта. **Не забывайте username и пароль**.

1. Создайте проект "tpro" ([инструкция по созданию проектов](//gitwork.ru/root/help/wikis/%D0%A1%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0)) в gitwork.ru. Не выбирайте других имен проекта. Проект всегда можно переименовать, о том как это сделать написано в wiki текущего проекта. Обратите внимание в инструкции указано, что необходимо добавить пользователей - уточните у преподавателя какого пользователя необходимо добавить, текущие преподаватели это **klexey** (kuznetsov), **anetto** (anetto_fullname) и **barabass** (buldyaev).

1. Изначально на вкладке project показано множество команд для работы с репозиторием. Так как после создания любого файла эта подсказка пропадает, найти их можно будет в файле [git_short.md](//gitwork.ru/sub/tpro/-/blob/master/git_short.md) или [git_full.md](//gitwork.ru/sub/tpro/-/blob/master/git_full.md) текущего репозитория.

1. Создайте файл README.md. (Учитывайте регистр, фала будет отображаться в любом случае, но примеры дальнейших команд и действий приведены именно для текущего названия). Этот файл нужен другим людям для знакомства с текущим проектом. README.md автоматически показывается пользователю, который зашёл в репозиторий. Например, в текущем проекте в данном файле размещены организационные вопросы, ссылки на задания и любая другая полезная информация. Для проектов с открытым исходным кодом README.md содержит небольшое описание проекта, примеры использования, информацию о лицензии и многое другое. Файл README.md может быть создан для любого каталога проекта, в таком случае его содержимое будет отображаться при входе в данный каталог.
    * В меню слева должно быть выбрано Project overview -> details (Информация). Посередине экрана вы видите название вашего проекта и множество пиктограмм. Если есть кнопка "Add readme.md" нажмите ее, если ее нет, то нажмите New file, в зависимости от версии GitLab это может быть зеленая кнопка New file или кнопка плюс (посередине, где написан адрес), далее new file (новый файл);
    * Ввести имя файла README.md;
    * В содержимое файла вписать весь текст из таблицы ниже (первую строку нужно изменить в соответствии с написанным в ней)

    ```markdown
    
    2017-3-07-iva Иванов
    
    # Выше впишите ваш fullname, состоящий из года поступления, группы, номера по журналу, первых трех букв фамилии, а также фамилию, это позволит понять, кто является автором проекта и вам самим убедиться, что вы скачали и работаете со своим репозиторием
    
    ## Это пример заголовка
        
    Здесь могут быть написаны разные вещи. Поддерживается markdown разметка, отсюда и расширение .md
    Обратите внимание, что это продолжение первой строки.
    
    А это строка вторая. Это особенность языка разметки - строки не отделенные пустой строкой, при просмотре файла склеиваются в одну.
    
    Есть списки
    1. Как нумерованные.
    1. Обратите внимание, что число "1" слева при отображении превратится в корректный номер.

    * так и маркированные;
    * и даже многоуровневые
        * второй уровень
            * третий уровень
    ```
    * Внизу, в commit message впишите "добавлен README.md", нажимите **commit changes**;
    * Посмотрите на отображаемое содержимое файла. Обратите внимание на корректную нумерацию в списке и другие изменения;


1. Работа со ссылками
    * Для созданного файла доступны кнопки edit (Редактировать), replace (Заменить), delete (Удалить). Зайдите в edit;
    * Теперь работает подсветка синтаксиса markdown. Подробнее о синтаксисе markdown [тут](//gitwork.ru/help/user/markdown#wiki-specific-markdown);
    * **Обратите внимение на особенность** - если текст не является нумерованным или маркированным списком, то для перевода строки требуется двойное нажаите "Enter"! Сравните текст при редактировании и в самом файле.
    * Добавьте ссылку на файл README.md в текст своего README.md. Ссылка на файл должна вести на **содержимое файла README**, а не в меню его редактирования. Эта ссылка, введённая на новой странице, должна загрузить файл README.md вашего проекта. (Например, из двух приведенных далее ссылок, одна ведет на файл (blob), а другая на окно его редактирования (edit) для **пользователя los** и его проекта timp: https://gitwork.ru/los/timp/-/blob/master/readme.md и https://gitwork.ru/los/timp/-/edit/master/readme.md)
    * Формат для добавления ссылки
    
    ```
    [текст для показа](сама ссылка)
    ```
    * После добавления ссылки вверху вкладку write переключите на preview, это покажет файл, как он будет выглядеть после окончания редактирования. Убедитесь, что ссылка отображается корректно;
    * В commit message впишите "добавлена ссылка на документацию" и нажмите commit;
    
1. Работа с ветками из web-интерфейса
    * Git позволяет хранить несколько веток проекта и работать с ними. Функционал веток допускает одновременное наличие разных версий файлов, среди которых можно переключаться. В обычной работе над ПЗ вам это не пригодится, но стоит попробовать эту возможность и использоавть ее в дальнейшем, например, при коллективной разработке.
    * **Ветка 1 - слияние при изменениях только в одной ветке**
    * Снова откройте для редактирования файл README.md и добавьте строку "Добавлено в ветке branch1" - не забывайте про необходимость дабовления пустых строк, чтобы строки не склеивались и предварительный просмотр при редактировании.
    * Поле Target branch (ветка) позволяет указать целевую ветку, куда сохранятся изменения.  Впишите в target branch (ветка) название "branch1" (пробелы в названии ветки не допускаются), уберите галочку "start a new merge request" ("Начать новый запрос на слияние с этих изменений"). Нажмите commit;
    * Вы создали новую ветку проекта branch1 в дополнение к основной ветке master. Содержимое файлов в ветках может отличаться.
    * Теперь вы видите новую редакцию файла. Вверху есть выпадающий список, в котором отображается "branch1". Этот список указывает на текущую ветку с которой ведется работа. Переключите его на master. Это действие вернёт старое содержимое файла, то есть версию файла, соответствующую ветке master. Таким образом, можно иметь две и более версии файла и легко переключаться между ними. При этом каждую из этих версий можно редактировать независимо, а при надобности - слить вместе;
    * Если все выполнено верно, то отличия между файлами README.md веток master и branch1, заключаются в наличии строчки "Добавлено в ветке branch1" в файле ветки branch1.
    * На левой вкладке в разделе Repository (Репозиторий) выберите Graph (Диаграмма) - вы увидите визуальное представление веток проекта, сейчас оно не такое наглядное, поскольку ветка branch1 опережает ветку master на одно изменение. Вверху можно выбрать текущую ветку, она будет отображаться краcным цветом на графике.
    * Произведем слияние веток, для этого в левой вкладке найдите и нажмите Merge Requests (Запросы на слияние). Git предоставляет возможность создавать запрос на слияние для только что выполненного изменения (синяя кнопка) или универсальное создание запроса (зеленая кнопка). На новой странице найдите и нажмите кнопку создания нового запроса.  Если выбрали синюю кнопку, то переходите далее, если зеленую, то  необходимо выбрать ветки, которые будут сливаться - в одном выпадаещем списке уже выбрана ветка master,  во втором окне выберите ветку branch1, и перейдите к сравнению веток и созданию запроса (зеленая кнопка).
    * В появившемся окне можно описать запрос на слияние, это необходимо для случаев, когда слияние подтверждает другой человек. Ниже в поле Assignee можно указать ответственное лицо за проведение слияния, данный человек должен являться членом текущего проекта. Сейчас это не будем изменять, поскольку вы единственный разработчик своего проекта и можете сами проводить слияние - нажмите кнопку submit merge request (запрос на слияние). Но слияние веток еще не произошло, мы создали только запрос на слияние.
    * В появившемся окне примерно посередине - зеленая кнопка Merge, и галочка "Delete branch" ("Удалить ветку после слияния"). Галочку лучше снять, в противном случае информация о ветке branch1 будет удалена и график будет выглядеть не так наглядно. После нажатия кнопки Merge произойдет слияние веток.
    * После слияния вернитесь в репозиторий, убедитесь, что вы находитесь в ветке master и посмотрите содержимое файла README.md - в нем добавилась строчка "Добавлено в ветке branch1". Если переключиться в графическое представление веток, то будет видно появление новой ветки, ответвляющейся от основного "ствола" и сливающейся обратно с ним.
    
    * **Ветка 2 - слияние при пересекающихся изменениях в двух ветках**
    * В рассмотренном примере с веткой 1 производилось слияние двух веток, в одной из которых не было изменений, поэтому конфликта не возникло. Смоделируем ситуацию с конфликтом, когда файл изменен в двух ветках параллельно.
    * Добавьте в файл README.md **ветки** branch2 строчку "Добавлено в ветке branch2" (Не забудьте указать правильную ветку и снять метку "начать слияние" перед сохранением файла).
    * Переключитесь на ветку master (новая строчка про branch2 должна пропасть) и добавьте в файл строку "Добавлено в ветке master".
    * Сравните содержимое файлов в ветках master и branch2, а также проверьте визуальное представление - Graph (Диаграмма).
    * Начните слияние веток, после нажатия кнопки submit merge request вы должны попасть на страницу с сообщением "There are merge conflicts" - то есть присутствует конфликт слияния веток, пооскольку изменения в файле произошли в одной и той же строке.
    * Нажмите кнопку "Resolve Conflicts" ("Разрешить конфликт") - отобразиться содержимое файла README.md и конфликтующие строки - одна будет обозначена "our changes" - изменения текущей ветки (branch2), другая строка - "their chages" - изменения ветки master. Напротив каждой такой строки будет кнопка "Use ours" или "Use theirs", то есть какое изменение использовать. Выберете изменения ветки branch2 и нажмите кнопку submit.
    * Завершите слияние - зайдите в список запросов на слияние, выбрав в меню слева "Запросы на слияние" (Merge Requests) и найдите в списке последний запрос, нажмите кнопку Merge
    * Проверьте содержимое файла и посмотрите графическое отображение веток проекта. 
    
    * **Ветка 3 - слияние при непересекающихся изменениях в двух ветках**
    * Теперь смоделируем ситуацию, когда есть два неконфликтующих изменения.
    * Файл README.md должен содержать строки "Добавлено в ветке branch1" и "Добавлено в ветке branch2" (или master, если при разрешении конфликта была ошибочно выбрана другая ветка).
    * Изменим эти строки в разных ветках.
    * В строку с branch1 добавим "изменено в ветке branch3" и сохраним в ветке branch3 (Не забыть ввести имя ветки и снять флажок с формирования запроса на слияние).
    * Вернуться в ветку master и в строку с branch2 (или master) добавить "изменено в ветке master".
    * Сравните содержимое файлов веток и графическое представление веток.
    * Начните запрос на слияние веток branch3 и master, конфликта не должно возникнуть, поскольку изменения затрагивали разные строки файла.
    * После подтерждения слияния кнопкой merge оба изменения попадут в файл README.md. Можно в этом убедиться посмотрев его содержание.
    * Посмотрите графическое представление веток проекта.
    * **Проверьте состояние веток проекта через графическое представление - все ветки должны быть слиты с основной веткой master**
    

1. Создание и выполнение issue. Issue - это задачи, тикеты или обсуждения. Предполагается, что любая разработка начинается с постановки задачи (issue). К задаче можно писать комментарии, например, с уточнениями или вариантами решения событий. К задачам относится как разработка нового функционала, так и устранение неисправностей (багов).
    * Зайдите во вкладку issues -> list (Обсуждения->Список) **ВАШЕГО** проекта. Нажмите new issue (новое обсуждение) на экране.
    * В title (заголовок) впишите "Отчет по заданию 1", в description впишите "освоено создание проекта". Поддерживается markdown, preview позволяет посмотреть результат. Внизу есть ссылка на документацию на markdown.
    * В assignee выберите себя. Перед выполнением submit посмотрите на верхний правый угол экрана, где меню на фиолетовом фоне. Выполните submit, и ещё раз посмотрите в верхнее меню. Теперь появилась белая цифра 1 в зеленом кружочке к пиктограмме issue - значит, вы назначены исполнителем для какого-то задания. Зайдите в это задание, и с помощью желтой кнопки close issue отметье его выполненным. Теперь после обновления страницы цифры у issue в правом верхнем углу не будет.
    * Закрытое issue остаётся в общей истории, помеченное закрытым. Для каждого issue можно вести обсуждение (например, для уточнения задания или проблемы).

### Опрос
1. В целях закрепления материала проводится опрос в виде тестов из 5 вопросов. Нельзя использовать internet explorer. На тест даётся 5 минут, ещё 1 дополнительная минута на отправку результатов. По окончании 6 минут результаты отправятся автоматически. Вверху страницы таймер на 5 минут, последняя минута считается отдельно и выделена красным.
2. В начале теста нужно заполнить данные о себе. Это год поступления, последняя цифра номера группы, порядковый номер по журналу (обязательно 2 цифры, слева дополнить нулём. То есть 01, 02, 11, ..), и фамилия на русском языке. К тесту приступать только после заполнения этих данных.
3. Проходить тест можно многократно, но оценивается только первая попытка, все предложенные вопросы рассмтаривались в данном задании.
4. Если готовы, то [приступить к опросу по GitLab](http://gitwork.ru:5000/tpro/pz0?pin=)

 
## Сдача задания

Для сдачи задания в **своем проекте** создайте issue "Сдача task1".

Назначьте получателем (Assignee) для issue своего преподавателя.

Если issue будет закрыто, то задание принято, в противном случае преподаватель укажет замечания в issue и переназначит его вам.




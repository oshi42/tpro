## Задание №8

## Тестирование ПО

Для разработанной в рамках задания №6 программы составить набор тестов с использованием системы тестирования Catch. 

Файл с тестами должен называться **task6_tests.cpp** и находиться в каталоге `task6`.

**При выполнении задания необходимо использовать систему контроля версий Git**, описание каждого коммита должно начинаться с **task8** плюс описание изменений в текущем коммите. Частота коммитов на усмотрение разработчика, но содержимое коммитов должно показывать работу над заданием, если это будет просто загрузка кода кусками, то оценка будет снижаться.

**Текущее задание направлено в первую очередь на выявление ошибок, а не на их устранение**. Проверяться будет полнота охвата тестами возможных ситаций, а не правильность работы программы. **При наличии времени, допускается устранение ошибок.**

В `CMakeLists.txt` необходимо добавить отдельную конфигурацию для тестов **"task6_test"**, для сборки в CLion должен быть указан тип конфигурации - Catch

Наборы тестов должны быть разбиты на 3 группы - каждая группа для одной функции программы, каждая группа может содержать любое количество наборов тестов (TEST_CASE)

```
Пример:

TEST_CASE("Имя_набора_тестов","[Имя_группы_тестов]")

Один набор тестов может принадлежать нескольким группам

TEST_CASE("Имя набора тестов","[группа1][группа2]")
```

Примеры для типов тестов: верные данные, неверные данные, отсутствие данных. 

Минимальное количество TEST_CASE - три - по одному для каждого типа тестов - итого минимум 9 наборов тестов (три группы по три набора тестов)

Для работы с файлами – неверными данными может быть содержание в файле строк вместо чисел, отсутствие данных – отсутствие файлов, пустой файл.

Для возможности сравнения файлов по содержимому можно реализовать дополнительно функцию **побайтового** сравнения файлов в бинарном режиме открытия, входными параметрами для которой являются имена файлов, а результатом порядковый номер байта с которого файлы отличаются. Если файлы не отличаются, то возвращается 0. Для возможности сравнения должны быть подготовлены **идеальные** файлы, содержащие правильный результат. Функцию для удобства можно разместить в `task6_tests.cpp`, `task6.cpp` или создать новый модуль.

Каждое условие (требование), описанное в задании на разработку программы необходимо проверить тестированием несколькими типами тестов.

Файлы (Входные данные) для тестирования должны быть предварительно подготовлены и не меняться в процессе тестирования, файлы хранить в подкаталоге **data8** каталога `task6`.

Файлы (Выходные данные), появившиеся после прохождения тестирования должны располагаться в том же каталоге, что и входные данные. Необходимо использовать различные выходные файлы для различных тестов, чтобы результат не перезаписывался.

Результат тестирования сохранить в виде скриншотов в issue на сдачу задания. Туда должны быть прикреплены скриншоты, показывающие результат запуска тестов в CLion, при этом должно быть открыто окно с текущими тестами (`task6_tests.cpp`). Можно сохранить результаты тестирования в виде текстового файла в том же каталоге, где расположены входные  и выходные данные.

Примеры написания тестов можно найти в example, скопированном в задании №5, презентациях лекции или документации по Catch

**Сдачу задания можно осущестлять удаленно**. Для сдачи задания создать в **своем** проекте **issue "Сдача task8"** и назначить его преподавателю (Assignee). Без назначения, он его не увидит.

Если задание принято, то issue закрывается, если есть замечания, то преподаватель ответит вам в issue и переназначит вам обратно.

### Если тесты долго компиляться

Причниа долгой компиляции после незначительного изменения является то, что при каждой компиляции тестов производится еще и компиляция `catch.hpp`, поскольку это header-тесты, а header, как известно, отдельно компилировать нельзя. Функция `main` из `catch.hpp` скрывается за надписью `#define CATCH_CONFIG_MAIN` в файле тестов.

Для ускорения компиляции необходимо разнести `TEST_CASE` и `catch.hpp` по разным файлам.

Например, у вас есть файл `task6_tests.cpp`
```cpp
...
#define CATCH_CONFIG_MAIN
#include "../catch.hpp"

TEST_CASE(....
```
Необходимо разделить `#define` и `TEST_CASE` по разным файлам. Для этого создайте файл,например, `test6-catch.cpp` и перенесите туда строку с `#define` и скопируйте `#include`. 

Должно получится так

файл `test6-catch.cpp`
```cpp
#define CATCH_CONFIG_MAIN
#include "../catch.hpp"
```

файл `task6_tests.cpp`
```cpp
...
#include "../catch.hpp"

TEST_CASE(....
```

Не забудьте включить файл `test6_catch.cpp` в состав конфигурации файла `CMakeLists.txt`

Теперь при каждой очередной компиляции тестов файл `catch.hpp` уже не будет компилироваться, будет компилироваться только `TEST_CASE`. Время компиляции должно существенно уменьшится.


